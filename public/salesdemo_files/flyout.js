(function($){$('#journal-cart').on('upsells:updated',function(event){$("#journal-cart .carousel-wrapper").flickity({cellAlign:'left',pageDots:!1,freeScroll:!0,contain:!0,imagesLoaded:!0,arrowShape:{x0:30.6,x1:69.8,y1:44.9,x2:63.9,y2:50,x3:20.3}})});$(document.body).on('wc_fragments_loaded',function(event){loadUpsells()});const getUpsells=()=>{const data=new FormData();data.append('action','jc_fetch_upsells');$.ajax({url:tsj_theme.ajaxurl,type:"POST",data:data,contentType:!1,cache:!1,processData:!1,success:(response)=>{let upsells=JSON.parse($(response).find('response_data').text());if(upsells!=''){showUpsells(upsells)}}})}
const showUpsells=(upsells)=>{const upsellsEl=document.getElementById('upsells-wrapper');if(upsellsEl==null){return}
upsellsEl.innerHTML="";const header=document.createElement('h2');header.innerHTML="Recommended for you";upsellsEl.appendChild(header);const upsellEl=document.createElement('div');upsellEl.classList.add('inner');upsellEl.innerHTML=upsells;upsellsEl.appendChild(upsellEl);$('#journal-cart').trigger('upsells:updated')}
const loadUpsells=()=>{try{getUpsells()}catch(error){console.log(error.message)}}
$('#journal-cart').on('cart:opened',function(event){if(!$("#journal-cart .carousel-wrapper").length){loadUpsells()}})})(jQuery)