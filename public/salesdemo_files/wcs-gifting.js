jQuery(document).ready(function($){$(document).on('change','.woocommerce_subscription_gifting_checkbox[type="checkbox"]',function(e,eventContext){if($(this).is(':checked')){$(this).closest('fieldset').find('.wcsg_add_recipient_fields').slideDown(250,function(){if('undefined'===typeof(eventContext)||'pageload'!=eventContext){$(this).find('.recipient_email').trigger('focus')}})}else{$(this).closest('fieldset').find('.wcsg_add_recipient_fields').slideUp(250);var recipient_email_element=$(this).closest('fieldset').find('.recipient_email');recipient_email_element.val('');if($('form.checkout').length!==0){update_checkout()}}});var cart={init:function(){$(document).on('submit','div.woocommerce > form',this.set_update_cart_as_clicked);var handlers=$._data(document,"events");if('undefined'!==typeof handlers.submit){handlers.submit.unshift(handlers.submit.pop())}},set_update_cart_as_clicked:function(evt){var $form=$(evt.target);var $submit=$(document.activeElement);if(0===$form.find('table.shop_table.cart').length){return}
if($submit.is('input.recipient_email')){$(':input[type="submit"][name="update_cart"]').attr('clicked','true')}}};cart.init();var update_timer;$(document).on('change','.recipient_email',function(){if($('form.checkout').length===0){return}
if($(this).hasClass('wcsg_needs_update')){update_checkout()}});$(document).on('keyup','.recipient_email',function(e){var code=e.keyCode||e.which||0;if($('form.checkout').length===0||code===9){return!0}
var current_recipient=$(this).val();var original_recipient=$(this).attr('data-recipient');reset_checkout_update_timer();if(current_recipient!==original_recipient){$(this).addClass('wcsg_needs_update');update_timer=setTimeout(update_checkout,'1500')}else{$(this).removeClass('wcsg_needs_update')}});function update_checkout(){reset_checkout_update_timer();$('.recipient_email').removeClass('wcsg_needs_update');$(document.body).trigger('update_checkout')}
function reset_checkout_update_timer(){clearTimeout(update_timer)}
$('.woocommerce_subscription_gifting_checkbox[type="checkbox"]').trigger('change','pageload')})